BK Dashboard - Work Revenue Enabled body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f7f7f7; } header { background:#333; color:#fff; padding:10px; text-align:center; } nav { background:#555; padding:10px; display:flex; gap:10px; flex-wrap:wrap; } nav button { padding:8px 14px; border:none; background:#eee; cursor:pointer; border-radius:4px; } nav button.active { background:#333; color:#fff; } .container { padding:15px; } h2,h3,h4 { margin-top:20px; } table { border-collapse:collapse; width:100%; margin-top:10px; background:#fff; } th,td { border:1px solid #ddd; padding:6px; font-size:14px; } th { background:#f0f0f0; } input,select { padding:6px; margin:4px; border:1px solid #ccc; border-radius:4px; } button { border:none; padding:6px 12px; margin:2px; border-radius:4px; cursor:pointer; } button.danger { background:#e74c3c; color:#fff; } button.success { background:#2ecc71; color:#fff; } button.info { background:#3498db; color:#fff; } .hidden { display:none; } .toast { position:fixed; bottom:20px; right:20px; background:#333; color:#fff; padding:10px; border-radius:4px; display:none; } .pagination-controls { margin-top:10px; } .report-section { margin-top:20px; padding:10px; background:#fff; border:1px solid #ddd; border-radius:4px; } .report-summary-row { font-weight:bold; } 

BK Dashboard (Work Revenue + Server Save)

Summary Vendors Purchase Orders Entry Manager Stock & Items Reports Global Search 

Company Summary

Vendors

Add Vendor 

NameContactActions 

Purchase Orders

Add PO 

PO NumberVendorActions 

Entry Manager

Work Revenue Expenses Sales 

Work Revenue Entry

Add 

DateVendorPODescriptionAmountActions 

Expenses

Add 

DateHeadAmountActions 

Sales

Add 

DateCustomerAmountActions 

Reports

From: To: Generate Sales vs Expense 

Global Search

// --- Data arrays --- let vendors = []; let purchaseOrders = []; let purchases = []; let expenses = []; let sales = []; let payments = []; let items = []; let stockEntries = []; let workRevenueEntries = []; let parties = []; let contractors = []; let expenseHeads = []; let employees = []; let attendance = []; // --- UI Helpers --- function showTab(tabId){ document.querySelectorAll('.tab-content').forEach(el=>el.classList.add('hidden')); document.getElementById(tabId).classList.remove('hidden'); document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active')); } function showSubTab(tabId){ document.querySelectorAll('.subtab-content').forEach(el=>el.classList.add('hidden')); document.getElementById(tabId).classList.remove('hidden'); } function showToast(msg){ const t=document.getElementById('toast'); t.textContent=msg; t.style.display='block'; setTimeout(()=>{t.style.display='none';},3000); } // --- Vendor --- function addVendor(){ const name=document.getElementById('vendorName').value.trim(); const contact=document.getElementById('vendorContact').value.trim(); if(!name) return; vendors.push({name,contact}); updateVendorTable(); saveAll(); } function updateVendorTable(){ const tbody=document.querySelector('#vendorTable tbody'); tbody.innerHTML=''; vendors.forEach((v,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${v.name}</td><td>${v.contact}</td> <td><button class="danger" onclick="deleteVendor(${i})">Delete</button></td>`; tbody.appendChild(tr); }); const sel=document.getElementById('poVendor'); sel.innerHTML=''; vendors.forEach((v,i)=>{const opt=document.createElement('option'); opt.value=i; opt.text=v.name; sel.add(opt);}); const wsel=document.getElementById('workVendor'); wsel.innerHTML=''; vendors.forEach((v,i)=>{const opt=document.createElement('option'); opt.value=i; opt.text=v.name; wsel.add(opt);}); } function deleteVendor(i){ vendors.splice(i,1); updateVendorTable(); saveAll(); } // --- PO --- function addPO(){ const no=document.getElementById('poNumber').value.trim(); const vid=document.getElementById('poVendor').value; if(!no||vid==='') return; purchaseOrders.push({no,vendor:vendors[vid].name}); updatePOTable(); saveAll(); } function updatePOTable(){ const tbody=document.querySelector('#poTable tbody'); tbody.innerHTML=''; purchaseOrders.forEach((po,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${po.no}</td><td>${po.vendor}</td> <td><button class="danger" onclick="deletePO(${i})">Delete</button></td>`; tbody.appendChild(tr); }); const sel=document.getElementById('workPO'); sel.innerHTML=''; purchaseOrders.forEach((po,i)=>{const opt=document.createElement('option'); opt.value=i; opt.text=po.no; sel.add(opt);}); } function deletePO(i){ purchaseOrders.splice(i,1); updatePOTable(); saveAll(); } // --- Work Revenue --- function addWorkRevenueEntry(){ const date=document.getElementById('workDate').value; const v=document.getElementById('workVendor').value; const po=document.getElementById('workPO').value; const desc=document.getElementById('workDescription').value; const amt=parseFloat(document.getElementById('workAmount').value)||0; if(!date||v===''||po===''||!desc||amt<=0) return; workRevenueEntries.push({ date, vendor: vendors[v]?vendors[v].name:'', po: purchaseOrders[po]?purchaseOrders[po].no:'', desc, amt }); updateWorkRevenueTable(); saveAll(); } function updateWorkRevenueTable(){ const tbody=document.querySelector('#workRevenueTable tbody'); tbody.innerHTML=''; workRevenueEntries.forEach((w,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${w.date}</td><td>${w.vendor}</td><td>${w.po}</td> <td>${w.desc}</td><td>${w.amt}</td> <td><button class="danger" onclick="deleteWorkRevenue(${i})">Delete</button></td>`; tbody.appendChild(tr); }); } function deleteWorkRevenue(i){ workRevenueEntries.splice(i,1); updateWorkRevenueTable(); saveAll(); } // --- Expenses --- function addExpense(){ const date=document.getElementById('expenseDate').value; const head=document.getElementById('expenseHead').value; const amt=parseFloat(document.getElementById('expenseAmount').value)||0; if(!date||!head||amt<=0) return; expenses.push({date,head,amt}); updateExpenseTable(); saveAll(); } function updateExpenseTable(){ const tbody=document.querySelector('#expenseTable tbody'); tbody.innerHTML=''; expenses.forEach((e,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${e.date}</td><td>${e.head}</td><td>${e.amt}</td> <td><button class="danger" onclick="deleteExpense(${i})">Delete</button></td>`; tbody.appendChild(tr); }); } function deleteExpense(i){ expenses.splice(i,1); updateExpenseTable(); saveAll(); } // --- Sales --- function addSale(){ const date=document.getElementById('saleDate').value; const cust=document.getElementById('saleCustomer').value; const amt=parseFloat(document.getElementById('saleAmount').value)||0; if(!date||!cust||amt<=0) return; sales.push({date,cust,amt}); updateSalesTable(); saveAll(); } function updateSalesTable(){ const tbody=document.querySelector('#salesTable tbody'); tbody.innerHTML=''; sales.forEach((s,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${s.date}</td><td>${s.cust}</td><td>${s.amt}</td> <td><button class="danger" onclick="deleteSale(${i})">Delete</button></td>`; tbody.appendChild(tr); }); } function deleteSale(i){ sales.splice(i,1); updateSalesTable(); saveAll(); } // --- Report --- function generateSalesVsExpenseReport(){ const from=document.getElementById('reportFrom').value; const to=document.getElementById('reportTo').value; let totalSales=0,totalWorkRev=0,totalExp=0; let html="<h4>Sales vs Expense Report</h4>"; html+="<table><tr><th>Date</th><th>Type</th><th>Description</th><th>Amount</th></tr>"; sales.forEach(s=>{ if((!from||s.date>=from)&&(!to||s.date<=to)){ html+=`<tr><td>${s.date}</td><td>Sale</td><td>${s.cust}</td><td>${s.amt}</td></tr>`; totalSales+=s.amt; } }); workRevenueEntries.forEach(w=>{ if((!from||w.date>=from)&&(!to||w.date<=to)){ html+=`<tr><td>${w.date}</td><td>Work Revenue</td><td>${w.desc}</td><td>${w.amt}</td></tr>`; totalWorkRev+=w.amt; } }); expenses.forEach(e=>{ if((!from||e.date>=from)&&(!to||e.date<=to)){ html+=`<tr><td>${e.date}</td><td>Expense</td><td>${e.head}</td><td>${e.amt}</td></tr>`; totalExp+=e.amt; } }); html+=`<tr class="report-summary-row"><td colspan="3">Total Sales</td><td>${totalSales}</td></tr>`; html+=`<tr class="report-summary-row"><td colspan="3">Total Work Revenue</td><td>${totalWorkRev}</td></tr>`; html+=`<tr class="report-summary-row"><td colspan="3">Total Expenses</td><td>${totalExp}</td></tr>`; const pl=(totalSales+totalWorkRev)-totalExp; html+=`<tr class="report-summary-row"><td colspan="3">Profit/Loss</td><td>${pl}</td></tr>`; html+="</table>"; document.getElementById('salesExpenseReport').innerHTML=html; } // --- SERVER SAVE/LOAD INTEGRATION --- async function loadAllFromServer(){ try{ const res=await fetch('/api/load'); if(!res.ok){console.warn('Load failed');return;} const data=await res.json(); vendors=data.vendors||[]; purchaseOrders=data.purchaseOrders||[]; purchases=data.purchases||[]; expenses=data.expenses||[]; sales=data.sales||[]; payments=data.payments||[]; items=data.items||[]; stockEntries=data.stockEntries||[]; workRevenueEntries=data.workRevenueEntries||[]; parties=data.parties||[]; contractors=data.contractors||[]; expenseHeads=data.expenseHeads||[]; employees=data.employees||[]; attendance=data.attendance||[]; updateVendorTable(); updatePOTable(); updateWorkRevenueTable(); updateExpenseTable(); updateSalesTable(); }catch(err){console.error(err);} } async function saveAll(){ try{ const data={vendors,purchaseOrders,purchases,expenses,sales,payments,items,stockEntries,workRevenueEntries,parties,contractors,expenseHeads,employees,attendance}; await fetch('/api/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}); }catch(err){console.error(err);} } window.addEventListener('load',()=>{ loadAllFromServer(); }); BK Dashboard - Work Revenue Enabled body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f7f7f7; } header { background:#333; color:#fff; padding:10px; text-align:center; } nav { background:#555; padding:10px; display:flex; gap:10px; flex-wrap:wrap; } nav button { padding:8px 14px; border:none; background:#eee; cursor:pointer; border-radius:4px; } nav button.active { background:#333; color:#fff; } .container { padding:15px; } h2,h3,h4 { margin-top:20px; } table { border-collapse:collapse; width:100%; margin-top:10px; background:#fff; } th,td { border:1px solid #ddd; padding:6px; font-size:14px; } th { background:#f0f0f0; } input,select { padding:6px; margin:4px; border:1px solid #ccc; border-radius:4px; } button { border:none; padding:6px 12px; margin:2px; border-radius:4px; cursor:pointer; } button.danger { background:#e74c3c; color:#fff; } button.success { background:#2ecc71; color:#fff; } button.info { background:#3498db; color:#fff; } .hidden { display:none; } .toast { position:fixed; bottom:20px; right:20px; background:#333; color:#fff; padding:10px; border-radius:4px; display:none; } .pagination-controls { margin-top:10px; } .report-section { margin-top:20px; padding:10px; background:#fff; border:1px solid #ddd; border-radius:4px; } .report-summary-row { font-weight:bold; } 

BK Dashboard (Work Revenue + Server Save)

Summary Vendors Purchase Orders Entry Manager Stock & Items Reports Global Search 

Company Summary

Vendors

Add Vendor 

NameContactActions 

Purchase Orders

Add PO 

PO NumberVendorActions 

Entry Manager

Work Revenue Expenses Sales 

Work Revenue Entry

Add 

DateVendorPODescriptionAmountActions 

Expenses

Add 

DateHeadAmountActions 

Sales

Add 

DateCustomerAmountActions 

Reports

From: To: Generate Sales vs Expense 

Global Search

// --- Data arrays --- let vendors = []; let purchaseOrders = []; let purchases = []; let expenses = []; let sales = []; let payments = []; let items = []; let stockEntries = []; let workRevenueEntries = []; let parties = []; let contractors = []; let expenseHeads = []; let employees = []; let attendance = []; // --- UI Helpers --- function showTab(tabId){ document.querySelectorAll('.tab-content').forEach(el=>el.classList.add('hidden')); document.getElementById(tabId).classList.remove('hidden'); document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active')); } function showSubTab(tabId){ document.querySelectorAll('.subtab-content').forEach(el=>el.classList.add('hidden')); document.getElementById(tabId).classList.remove('hidden'); } function showToast(msg){ const t=document.getElementById('toast'); t.textContent=msg; t.style.display='block'; setTimeout(()=>{t.style.display='none';},3000); } // --- Vendor --- function addVendor(){ const name=document.getElementById('vendorName').value.trim(); const contact=document.getElementById('vendorContact').value.trim(); if(!name) return; vendors.push({name,contact}); updateVendorTable(); saveAll(); } function updateVendorTable(){ const tbody=document.querySelector('#vendorTable tbody'); tbody.innerHTML=''; vendors.forEach((v,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${v.name}</td><td>${v.contact}</td> <td><button class="danger" onclick="deleteVendor(${i})">Delete</button></td>`; tbody.appendChild(tr); }); const sel=document.getElementById('poVendor'); sel.innerHTML=''; vendors.forEach((v,i)=>{const opt=document.createElement('option'); opt.value=i; opt.text=v.name; sel.add(opt);}); const wsel=document.getElementById('workVendor'); wsel.innerHTML=''; vendors.forEach((v,i)=>{const opt=document.createElement('option'); opt.value=i; opt.text=v.name; wsel.add(opt);}); } function deleteVendor(i){ vendors.splice(i,1); updateVendorTable(); saveAll(); } // --- PO --- function addPO(){ const no=document.getElementById('poNumber').value.trim(); const vid=document.getElementById('poVendor').value; if(!no||vid==='') return; purchaseOrders.push({no,vendor:vendors[vid].name}); updatePOTable(); saveAll(); } function updatePOTable(){ const tbody=document.querySelector('#poTable tbody'); tbody.innerHTML=''; purchaseOrders.forEach((po,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${po.no}</td><td>${po.vendor}</td> <td><button class="danger" onclick="deletePO(${i})">Delete</button></td>`; tbody.appendChild(tr); }); const sel=document.getElementById('workPO'); sel.innerHTML=''; purchaseOrders.forEach((po,i)=>{const opt=document.createElement('option'); opt.value=i; opt.text=po.no; sel.add(opt);}); } function deletePO(i){ purchaseOrders.splice(i,1); updatePOTable(); saveAll(); } // --- Work Revenue --- function addWorkRevenueEntry(){ const date=document.getElementById('workDate').value; const v=document.getElementById('workVendor').value; const po=document.getElementById('workPO').value; const desc=document.getElementById('workDescription').value; const amt=parseFloat(document.getElementById('workAmount').value)||0; if(!date||v===''||po===''||!desc||amt<=0) return; workRevenueEntries.push({ date, vendor: vendors[v]?vendors[v].name:'', po: purchaseOrders[po]?purchaseOrders[po].no:'', desc, amt }); updateWorkRevenueTable(); saveAll(); } function updateWorkRevenueTable(){ const tbody=document.querySelector('#workRevenueTable tbody'); tbody.innerHTML=''; workRevenueEntries.forEach((w,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${w.date}</td><td>${w.vendor}</td><td>${w.po}</td> <td>${w.desc}</td><td>${w.amt}</td> <td><button class="danger" onclick="deleteWorkRevenue(${i})">Delete</button></td>`; tbody.appendChild(tr); }); } function deleteWorkRevenue(i){ workRevenueEntries.splice(i,1); updateWorkRevenueTable(); saveAll(); } // --- Expenses --- function addExpense(){ const date=document.getElementById('expenseDate').value; const head=document.getElementById('expenseHead').value; const amt=parseFloat(document.getElementById('expenseAmount').value)||0; if(!date||!head||amt<=0) return; expenses.push({date,head,amt}); updateExpenseTable(); saveAll(); } function updateExpenseTable(){ const tbody=document.querySelector('#expenseTable tbody'); tbody.innerHTML=''; expenses.forEach((e,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${e.date}</td><td>${e.head}</td><td>${e.amt}</td> <td><button class="danger" onclick="deleteExpense(${i})">Delete</button></td>`; tbody.appendChild(tr); }); } function deleteExpense(i){ expenses.splice(i,1); updateExpenseTable(); saveAll(); } // --- Sales --- function addSale(){ const date=document.getElementById('saleDate').value; const cust=document.getElementById('saleCustomer').value; const amt=parseFloat(document.getElementById('saleAmount').value)||0; if(!date||!cust||amt<=0) return; sales.push({date,cust,amt}); updateSalesTable(); saveAll(); } function updateSalesTable(){ const tbody=document.querySelector('#salesTable tbody'); tbody.innerHTML=''; sales.forEach((s,i)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${s.date}</td><td>${s.cust}</td><td>${s.amt}</td> <td><button class="danger" onclick="deleteSale(${i})">Delete</button></td>`; tbody.appendChild(tr); }); } function deleteSale(i){ sales.splice(i,1); updateSalesTable(); saveAll(); } // --- Report --- function generateSalesVsExpenseReport(){ const from=document.getElementById('reportFrom').value; const to=document.getElementById('reportTo').value; let totalSales=0,totalWorkRev=0,totalExp=0; let html="<h4>Sales vs Expense Report</h4>"; html+="<table><tr><th>Date</th><th>Type</th><th>Description</th><th>Amount</th></tr>"; sales.forEach(s=>{ if((!from||s.date>=from)&&(!to||s.date<=to)){ html+=`<tr><td>${s.date}</td><td>Sale</td><td>${s.cust}</td><td>${s.amt}</td></tr>`; totalSales+=s.amt; } }); workRevenueEntries.forEach(w=>{ if((!from||w.date>=from)&&(!to||w.date<=to)){ html+=`<tr><td>${w.date}</td><td>Work Revenue</td><td>${w.desc}</td><td>${w.amt}</td></tr>`; totalWorkRev+=w.amt; } }); expenses.forEach(e=>{ if((!from||e.date>=from)&&(!to||e.date<=to)){ html+=`<tr><td>${e.date}</td><td>Expense</td><td>${e.head}</td><td>${e.amt}</td></tr>`; totalExp+=e.amt; } }); html+=`<tr class="report-summary-row"><td colspan="3">Total Sales</td><td>${totalSales}</td></tr>`; html+=`<tr class="report-summary-row"><td colspan="3">Total Work Revenue</td><td>${totalWorkRev}</td></tr>`; html+=`<tr class="report-summary-row"><td colspan="3">Total Expenses</td><td>${totalExp}</td></tr>`; const pl=(totalSales+totalWorkRev)-totalExp; html+=`<tr class="report-summary-row"><td colspan="3">Profit/Loss</td><td>${pl}</td></tr>`; html+="</table>"; document.getElementById('salesExpenseReport').innerHTML=html; } // --- SERVER SAVE/LOAD INTEGRATION --- async function loadAllFromServer(){ try{ const res=await fetch('/api/load'); if(!res.ok){console.warn('Load failed');return;} const data=await res.json(); vendors=data.vendors||[]; purchaseOrders=data.purchaseOrders||[]; purchases=data.purchases||[]; expenses=data.expenses||[]; sales=data.sales||[]; payments=data.payments||[]; items=data.items||[]; stockEntries=data.stockEntries||[]; workRevenueEntries=data.workRevenueEntries||[]; parties=data.parties||[]; contractors=data.contractors||[]; expenseHeads=data.expenseHeads||[]; employees=data.employees||[]; attendance=data.attendance||[]; updateVendorTable(); updatePOTable(); updateWorkRevenueTable(); updateExpenseTable(); updateSalesTable(); }catch(err){console.error(err);} } async function saveAll(){ try{ const data={vendors,purchaseOrders,purchases,expenses,sales,payments,items,stockEntries,workRevenueEntries,parties,contractors,expenseHeads,employees,attendance}; await fetch('/api/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}); }catch(err){console.error(err);} } window.addEventListener('load',()=>{ loadAllFromServer(); }); 
